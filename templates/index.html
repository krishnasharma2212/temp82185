<!DOCTYPE html>
<html class="light" lang="de">

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="theme-color" content="#20cfdf">

    <!-- Primary SEO -->
    <title>Realistix Doll | Premium-Sexpuppen & KI-Roboter – Schnelle EU-Lieferung</title>

    <meta name="description"
        content="Entdecken Sie die weltweit realistischsten TPE- und Silikon-Sexpuppen sowie KI-Liebesroboter. Vollständig anpassbare Begleiter mit diskretem, zollfreiem Versand nach Deutschland, Großbritannien, Frankreich und in ganz Europa." />

    <meta name="keywords"
        content="sexpuppe europa, realistische liebespuppe, TPE sexpuppe, silikon sexpuppe, KI sexroboter, individuelle sexpuppe, lebensgroße puppe, liebespuppe deutschland, real doll deutschland, Realistix Doll" />

    <meta name="author" content="Realistix Doll Europäisches Atelier" />
    <link rel="canonical" href="https://www.realistixdoll.com/" />

    <!-- ============================================ -->
    <!-- 2. EUROPEAN GEO-TARGETING -->
    <!-- ============================================ -->
    <meta name="geo.region" content="DE" />
    <meta name="geo.region" content="GB-ENG" />
    <meta name="geo.region" content="FR" />
    <meta name="geo.placename" content="Berlin" />
    <meta name="geo.position" content="52.5200;13.4050" />
    <meta name="ICBM" content="52.5200, 13.4050" />

    <!-- Language Definitions -->
    <link rel="alternate" href="https://www.realistixdoll.com/" hreflang="x-default" />
    <link rel="alternate" href="https://www.realistixdoll.com/" hreflang="de-DE" />
    <link rel="alternate" href="https://www.realistixdoll.com/" hreflang="en-GB" />
    <link rel="alternate" href="https://www.realistixdoll.com/" hreflang="fr-FR" />

    <!-- ============================================ -->
    <!-- 3. ADULT CONTENT COMPLIANCE -->
    <!-- ============================================ -->
    <meta name="rating" content="adult" />
    <meta name="RATING" content="RTA-5042-1996-1400-1577-RTA" />

    <!-- ============================================ -->
    <!-- 4. OPEN GRAPH -->
    <!-- ============================================ -->
    <meta property="og:type" content="website" />
    <meta property="og:site_name" content="Realistix Doll" />
    <meta property="og:url" content="https://www.realistixdoll.com/" />
    <meta property="og:title" content="Realistix Doll | Premium-Sexpuppen & KI-Begleiter" />
    <meta property="og:description"
        content="Entdecken Sie hyperrealistische Silikon- und TPE-Liebespuppen. Europäische Handwerkskunst, 100 % diskrete Lieferung." />
    <meta property="og:image" content="https://www.realistixdoll.com/static/banner.jpg" />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <meta property="og:locale" content="de_DE" />

    <!-- ============================================ -->
    <!-- 5. TWITTER CARDS -->
    <!-- ============================================ -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Realistix Doll | Die Zukunft der Intimität" />
    <meta name="twitter:description"
        content="Premium-Sexpuppen und KI-Roboter in Europa erhältlich. Individuell nach Ihren Wünschen gefertigt." />
    <meta name="twitter:image" content="https://www.realistixdoll.com/static/banner.jpg" />

    <!-- ============================================ -->
    <!-- 6. ROBOTS & INDEXING -->
    <!-- ============================================ -->
    <meta name="robots" content="index, follow, max-image-preview:large" />


    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com?plugins=forms,typography"></script>

    <link rel="icon" type="image/png" href="/static/icons/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="/static/icons/favicon.svg" />
    <link rel="shortcut icon" href="/static/icons/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="/static/icons/apple-touch-icon.png" />
    <meta name="apple-mobile-web-app-title" content="Realistix Doll" />
    <link rel="manifest" href="/static/icons/site.webmanifest" />

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap"
        rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap"
        rel="stylesheet" />

    <script id="tailwind-config">
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#20cfdf",
                        "primary-dark": "#18a0ac",
                        "background-light": "#f8f9fa",
                        "background-dark": "#111f21",
                        "surface": "#ffffff"
                    },
                    fontFamily: {
                        "sans": ["Inter", "sans-serif"]
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.5s ease-out forwards',
                        'shimmer': 'shimmer 1.5s infinite linear',
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0', transform: 'translateY(10px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' },
                        },
                        shimmer: {
                            '0%': { backgroundPosition: '-1000px 0' },
                            '100%': { backgroundPosition: '1000px 0' }
                        }
                    }
                },
            },
        }
    </script>
    <style>
        .material-symbols-outlined {
            font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24;
        }

        body {
            font-family: 'Inter', sans-serif;
        }

        /* Age Gate Blur */
        body.age-locked {
            overflow: hidden;
        }

        #app-content.blurred {
            filter: blur(12px);
            pointer-events: none;
            user-select: none;
        }

        /* Skeleton Shimmer Effect */
        .skeleton-shimmer {
            background: #f6f7f8;
            background-image: linear-gradient(to right, #f6f7f8 0%, #edeef1 20%, #f6f7f8 40%, #f6f7f8 100%);
            background-repeat: no-repeat;
            background-size: 1000px 100%;
            animation: shimmer 1.5s infinite linear forwards;
        }
    </style>
</head>

<body class="bg-background-light text-slate-800 antialiased selection:bg-primary/20">

    <!-- === AGE VERIFICATION MODAL === -->
    <div id="age-gate"
        class="fixed inset-0 z-[100] flex items-center justify-center bg-slate-900/90 backdrop-blur-xl p-4 transition-opacity duration-500 hidden">

        <div id="age-step-1"
            class="bg-white rounded-2xl shadow-2xl max-w-md w-full p-8 text-center border-t-4 border-primary animate-fade-in">

            <div class="mb-6 flex justify-center text-primary">
                <span class="material-symbols-outlined text-6xl">18_up_rating</span>
            </div>

            <h2 class="text-3xl font-black text-slate-900 mb-2">Altersüberprüfung</h2>

            <p class="text-slate-500 mb-8">
                Diese Website enthält hochwertige Sammlerstücke für Erwachsene.
                Sie müssen mindestens 18 Jahre alt sein, um fortzufahren.
            </p>

            <div class="flex flex-col gap-3">
                <button onclick="verifyAge(true)"
                    class="w-full bg-primary hover:bg-primary-dark text-white font-bold py-4 rounded-xl text-lg transition-all transform hover:scale-[1.02] shadow-lg shadow-primary/30">
                    Ich bin 18 Jahre oder älter
                </button>

                <button onclick="rejectAge()"
                    class="w-full bg-slate-100 hover:bg-slate-200 text-slate-600 font-bold py-4 rounded-xl text-lg transition-all">
                    Ich bin unter 18 Jahren
                </button>
            </div>
        </div>

        <div id="age-step-2"
            class="hidden bg-white rounded-2xl shadow-2xl max-w-md w-full p-8 text-center border-t-4 border-red-500">

            <div class="mb-6 flex justify-center text-red-500">
                <span class="material-symbols-outlined text-6xl">block</span>
            </div>

            <h2 class="text-2xl font-black text-slate-900 mb-2">Zugriff verweigert</h2>

            <p class="text-slate-500 mb-8">
                Der Zugriff ist nur für Personen ab 18 Jahren erlaubt.
            </p>

            <button onclick="resetAgeGate()"
                class="w-full bg-slate-900 hover:bg-slate-800 text-white font-bold py-4 rounded-xl text-lg transition-all">
                OK
            </button>
        </div>
    </div>


    <!-- === MAIN CONTENT === -->
    <div id="app-content" class="transition-all duration-700">

        <!-- Header -->
        <!-- === HEADER === -->
        <header
            class="sticky top-0 z-50 w-full bg-white/90 backdrop-blur-xl border-b border-slate-200 shadow-sm transition-all duration-300">
            <div class="max-w-[1440px] mx-auto px-4 sm:px-6 lg:px-20 h-20 flex items-center justify-between">

                <!-- 1. LEFT: Mobile Menu Button & Logo -->
                <div class="flex items-center gap-4">
                    <!-- Mobile Menu Toggle -->
                    <button onclick="toggleMobileMenu()"
                        class="lg:hidden p-2 -ml-2 text-slate-600 hover:bg-slate-100 rounded-lg transition-colors">
                        <span class="material-symbols-outlined text-2xl">menu</span>
                    </button>

                    <!-- Logo -->
                    <a href="/" class="flex items-center gap-3 group">
                        <div class="size-8 text-primary transition-transform duration-500 group-hover:rotate-12">
                            <img src="/static/icons/favicon.svg" alt="Realistix Doll"
                                class="w-full h-full object-contain">
                        </div>
                        <h1 class="text-xl sm:text-2xl font-black tracking-tighter text-slate-900 font-serif">Realistix
                            Doll</h1>
                    </a>
                </div>



                <!-- 3. RIGHT: Actions -->
                <div class="flex items-center gap-2 sm:gap-4">

                    <!-- Language Selector (Desktop Only) -->

                    <div class="h-6 w-px bg-slate-200 hidden lg:block"></div>

                    <!-- Auth Actions (Desktop) -->
                    <div id="header-auth-actions"
                        class="hidden lg:flex items-center gap-3 opacity-0 transition-opacity duration-500 ease-in">
                    </div>

                    <!-- Cart Button -->
                    <button onclick="toggleCart()"
                        class="relative p-2 text-slate-600 hover:bg-slate-100 rounded-lg transition-colors group">
                        <span
                            class="material-symbols-outlined group-hover:text-primary transition-colors text-2xl">shopping_cart</span>
                        <span id="cart-badge"
                            class="absolute top-1 right-1 size-2.5 bg-red-500 rounded-full border-2 border-white hidden animate-bounce"></span>
                    </button>
                </div>
            </div>
        </header>

        <!-- === MOBILE MENU OVERLAY === -->
        <div id="mobile-menu-overlay"
            class="fixed inset-0 z-[60] bg-slate-900/50 backdrop-blur-sm opacity-0 invisible transition-all duration-300 lg:hidden"
            onclick="toggleMobileMenu()"></div>

        <!-- === MOBILE MENU SIDEBAR === -->
        <div id="mobile-menu"
            class="fixed top-0 left-0 z-[70] h-full w-4/5 max-w-sm bg-white shadow-2xl transform -translate-x-full transition-transform duration-300 ease-out flex flex-col lg:hidden">

            <!-- Menu Header -->
            <div class="p-5 border-b border-slate-100 flex items-center justify-between bg-slate-50/50">
                <h2 class="text-lg font-black text-slate-900 font-serif">Menü</h2>
                <button onclick="toggleMobileMenu()"
                    class="p-2 hover:bg-slate-200 rounded-full transition-colors text-slate-500">
                    <span class="material-symbols-outlined">close</span>
                </button>
            </div>

            <!-- Menu Items -->
            <div class="flex-1 overflow-y-auto p-5 space-y-6">

                <!-- Auth Section (Mobile) -->
                <div id="mobile-auth-container" class="p-4 bg-slate-50 rounded-2xl border border-slate-100">
                    <!-- Injected via JS based on auth state -->
                    <div class="animate-pulse flex gap-3">
                        <div class="size-10 bg-slate-200 rounded-full"></div>
                        <div class="flex-1 space-y-2 py-1">
                            <div class="h-4 bg-slate-200 rounded w-3/4"></div>
                            <div class="h-3 bg-slate-200 rounded w-1/2"></div>
                        </div>
                    </div>
                </div>



            </div>

            <div class="p-5 border-t border-slate-100 text-center text-xs text-slate-400">
                &copy; 2026 Realistix Doll
            </div>
        </div>

        <!-- Menu Footer -->

    </div>

    <main class="max-w-[1440px] mx-auto min-h-screen pb-20">
        <!-- Hero Section -->
        <section class="px-6 lg:px-20 py-8">
            <div
                class="relative overflow-hidden rounded-3xl bg-slate-900 min-h-[500px] lg:h-[600px] flex items-center shadow-2xl group ring-1 ring-white/10">

                <!-- Background Image (Ensure you use a wide, high-res image of a doll here) -->
                <div class="absolute inset-0 z-0">
                    <!-- Changed visual fitting to cover -->
                    <img src="/static/banner.jpg" alt="Premium Realistische Sexpuppe Banner"
                        class="w-full h-full object-cover opacity-50 transition-transform duration-[20s] group-hover:scale-105"
                        style="object-position: center 20%;">

                    <!-- Gradient Overlay for Text Readability -->
                    <div class="absolute inset-0 bg-gradient-to-r from-slate-900 via-slate-900/80 to-transparent">
                    </div>
                </div>

                <!-- Content -->
                <div class="relative z-10 w-full lg:w-2/3 px-8 lg:px-16 flex flex-col gap-6 text-white">

                    <!-- Niche Badge -->
                    <div
                        class="w-fit flex items-center gap-2 px-3 py-1 rounded-full border border-primary/30 bg-primary/10 text-primary text-xs font-bold uppercase tracking-widest animate-fade-in">
                        <span class="material-symbols-outlined text-sm">auto_awesome</span>
                        <span>Premium TPE & Silikon</span>
                    </div>

                    <!-- Main Headline -->
                    <h2 class="text-4xl lg:text-6xl font-black leading-[1.1] tracking-tight animate-fade-in font-serif">
                        Unvergleichlicher Realismus.<br>
                        <span class="text-transparent bg-clip-text bg-gradient-to-r from-white to-slate-400">
                            Ihre perfekte Fantasie.
                        </span>
                    </h2>

                    <!-- Subtext -->
                    <p class="text-lg lg:text-xl font-light text-slate-300 max-w-xl animate-fade-in leading-relaxed"
                        style="animation-delay: 0.1s">
                        Entdecken Sie unsere Kollektion hyperrealistischer Liebespuppen mit
                        beweglichem Skelett, besonders weicher Haut und lebensechter Schönheit –
                        entwickelt für Ihre ultimative Begleitung.
                    </p>

                    <!-- Buttons -->
                    <div class="flex flex-col sm:flex-row gap-4 animate-fade-in" style="animation-delay: 0.2s">
                        <button onclick="scrollToGrid()"
                            class="flex items-center justify-center gap-2 bg-primary hover:bg-primary-dark text-white px-8 py-4 rounded-xl font-bold text-lg transition-all shadow-lg shadow-primary/20 hover:shadow-primary/40 hover:-translate-y-1">
                            <span>Partner finden</span>
                            <span class="material-symbols-outlined">arrow_forward</span>
                        </button>
                    </div>

                    <!-- Trust Badges -->
                    <div class="flex gap-6 mt-4 pt-6 border-t border-white/10 text-slate-400 text-xs font-medium uppercase tracking-wide animate-fade-in"
                        style="animation-delay: 0.3s">
                        <div class="flex items-center gap-1.5">
                            <span class="material-symbols-outlined text-primary text-lg">local_shipping</span>
                            100 % diskret
                        </div>
                        <div class="flex items-center gap-1.5">
                            <span class="material-symbols-outlined text-primary text-lg">verified_user</span>
                            1 Jahr Garantie
                        </div>
                    </div>

                </div>

            </div>
        </section>

        <!-- Tools & Grid -->
        <section id="shop-anchor" class="px-6 lg:px-20 py-8">

            <!-- Search & Filter Bar -->
            <div
                class="flex flex-col md:flex-row justify-between items-center mb-8 gap-4 sticky top-0 z-30 bg-background-light/95 backdrop-blur py-4 -mx-4 px-4 rounded-xl border-b border-transparent md:border-none">

                <div class="relative w-full md:w-96 group">
                    <span
                        class="material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 group-focus-within:text-primary transition-colors">
                        search
                    </span>
                    <input type="text" id="search-input" placeholder="Kollektion durchsuchen..."
                        class="w-full pl-10 pr-4 py-3 bg-white border border-slate-200 rounded-xl focus:ring-2 focus:ring-primary focus:border-transparent outline-none transition-shadow shadow-sm hover:shadow-md">
                </div>

                <div class="flex items-center gap-3">
                    <span class="text-sm font-bold text-slate-500 uppercase tracking-wide text-xs">
                        Sortieren
                    </span>
                    <select id="sort-select"
                        class="bg-white border border-slate-200 text-slate-700 text-sm font-bold rounded-xl focus:ring-primary focus:border-primary block w-48 p-2.5 outline-none shadow-sm cursor-pointer hover:border-primary transition-colors">
                        <option value="">Standard</option>
                        <option value="low-to-high">Preis: aufsteigend</option>
                        <option value="high-to-low">Preis: absteigend</option>
                        <option value="a-z">Name: A–Z</option>
                    </select>
                </div>
            </div>


            <!-- Product Grid -->
            <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-8" id="product-grid">
                <!-- Products will be injected here -->
            </div>

            <!-- Load More Button (Hidden by default) -->
            <div id="load-more-container" class="hidden col-span-full flex justify-center py-12">
                <!-- Button injected via JS -->
            </div>

        </section>
    </main>

<!-- === MODERN FOOTER === -->
<footer class="bg-slate-900 text-slate-300 border-t border-slate-800 pt-16 pb-8 font-sans">
        <div class="max-w-[1440px] mx-auto px-6 lg:px-20">

            <!-- Top Grid: Brand, Links, Contact -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-12 mb-16">

                <!-- 1. Brand & Promise -->
                <div class="space-y-6">
                    <a href="/" class="flex items-center gap-3 group">
                        <div
                            class="size-10 bg-white/5 rounded-xl flex items-center justify-center border border-white/10 group-hover:border-primary/50 transition-colors">
                            <img src="/static/icons/favicon.svg" alt="Realistix" class="size-6 opacity-90">
                        </div>
                        <span class="text-xl font-black text-white tracking-tight font-serif">Realistix Doll</span>
                    </a>
                    <p class="text-sm text-slate-400 leading-relaxed">
                        Handgefertigte TPE- & Silikonkunstwerke. Wir verbinden europäische Design-Standards mit
                        meisterhafter Handwerkskunst für unvergleichlichen Realismus.
                    </p>
                    <div class="flex items-center gap-4 pt-2">
                        <div
                            class="flex items-center gap-1.5 px-3 py-1.5 rounded-full bg-emerald-500/10 border border-emerald-500/20 text-emerald-400 text-[10px] font-bold uppercase tracking-wider">
                            <span class="material-symbols-outlined text-sm">verified_user</span>
                            Verifizierter Shop
                        </div>
                    </div>
                </div>

                <!-- 2. Customer Care -->
                <div>
                    <h4 class="text-white font-bold mb-6 flex items-center gap-2">
                        <span class="w-1 h-4 bg-primary rounded-full"></span>
                        Service & Hilfe
                    </h4>
                    <ul class="space-y-3 text-sm">
                        <li><a href="/my-orders"
                                class="hover:text-primary transition-colors flex items-center gap-2"><span
                                    class="material-symbols-outlined text-xs opacity-50">chevron_right</span> Meine
                                Bestellungen</a></li>
                    </ul>
                </div>

                <!-- 3. Legal (Rechtliches) -->
                <div>
                    <h4 class="text-white font-bold mb-6 flex items-center gap-2">
                        <span class="w-1 h-4 bg-primary rounded-full"></span>
                        Rechtliches
                    </h4>
                    <ul class="space-y-3 text-sm">
                        <li><a href="/impressum"
                                class="hover:text-primary transition-colors flex items-center gap-2"><span
                                    class="material-symbols-outlined text-xs opacity-50">gavel</span> Impressum</a></li>
                        <li><a href="/datenschutz"
                                class="hover:text-primary transition-colors flex items-center gap-2"><span
                                    class="material-symbols-outlined text-xs opacity-50">policy</span>
                                Datenschutzerklärung</a></li>
                        <li><a href="/agb" class="hover:text-primary transition-colors flex items-center gap-2"><span
                                    class="material-symbols-outlined text-xs opacity-50">description</span> AGB</a></li>
                        <li><a href="/widerruf"
                                class="hover:text-primary transition-colors flex items-center gap-2"><span
                                    class="material-symbols-outlined text-xs opacity-50">undo</span> Widerrufsrecht</a>
                        </li>
                    </ul>
                </div>

                <!-- 4. Contact & HQ (Transparent Indian Address) -->
                <div>
                    <h4 class="text-white font-bold mb-6 flex items-center gap-2">
                        <span class="w-1 h-4 bg-primary rounded-full"></span>
                        Atelier & Kontakt
                    </h4>
                    <div class="space-y-4 text-sm text-slate-400">
                        <div class="flex items-start gap-3">
                            <span class="material-symbols-outlined text-primary mt-0.5">location_on</span>
                            <div>
                                <strong class="text-slate-200 block">Realistix Doll HQ</strong>
                                <span class="block">Connaught Place</span>
                                <span class="block">110001 New Delhi, Indien</span>
                            </div>
                        </div>
                        <div class="flex items-center gap-3">
                            <span class="material-symbols-outlined text-primary">mail</span>
                            <a href="mailto:support@realistixdoll.com"
                                class="hover:text-white transition-colors">support@realistixdoll.com</a>
                        </div>
                        <div class="flex items-center gap-3">
                            <span class="material-symbols-outlined text-primary">call</span>
                            <span>+91 98765 43210</span>
                        </div>
                    </div>
                </div>

            </div>

            <!-- Middle: Trust & Payment Bar -->
            <div class="border-t border-slate-800 py-8 flex flex-col md:flex-row justify-between items-center gap-6">

                <!-- Secure Payment -->
                <div class="flex flex-col items-center md:items-start gap-3">
                    <span class="text-[10px] font-bold uppercase tracking-widest text-slate-500">Sichere Zahlung</span>
                    <div
                        class="flex items-center gap-3 opacity-80 grayscale hover:grayscale-0 transition-all duration-500">
                        <!-- Using generic SVGs or hosted logos for professionalism -->
                        <img src="/static/wise.png"
                            class="h-12 w-auto bg-white rounded px-1" alt="Wise">
                        <img src="/static/revolut.png"
                            class="h-12 w-auto bg-white rounded px-1" alt="Revolut">
                        <img src="/static/worldremit.png"
                            class="h-12 w-auto bg-white rounded px-1" alt="Visa">
                        <img src="/static/remitly.png"
                            class="h-12 w-auto bg-white rounded px-1" alt="Mastercard">
                    </div>
                </div>

                <!-- Global Shipping -->
                <div class="flex flex-col items-center md:items-end gap-3">
                    <span class="text-[10px] font-bold uppercase tracking-widest text-slate-500">Logistikpartner</span>
                    <div
                        class="flex items-center gap-3 opacity-80 grayscale hover:grayscale-0 transition-all duration-500">
                        <img src="https://cdn.worldvectorlogo.com/logos/dhl-1.svg"
                            class="h-12 w-auto bg-white rounded px-1" alt="DHL">
                        <img src="https://cdn.worldvectorlogo.com/logos/fedex-express-6.svg"
                            class="h-12 w-auto bg-white rounded px-1" alt="FedEx">
                    </div>
                </div>

            </div>

            <!-- Bottom: Copyright & Disclaimer -->
            <div
                class="border-t border-slate-800 pt-8 flex flex-col md:flex-row justify-between items-center gap-4 text-xs text-slate-500">
                <p>
                    &copy; 2026 Realistix Doll S.A. Alle Rechte vorbehalten.
                    <span class="hidden md:inline mx-2 text-slate-700">|</span>
                    Operated by Rahul Sharma Enterprises, India.
                </p>
                <div class="flex items-center gap-4">
                    <span class="flex items-center gap-1"><span
                            class="material-symbols-outlined text-[14px]">lock</span> SSL Verschlüsselt</span>
                    <span class="flex items-center gap-1"><span
                            class="material-symbols-outlined text-[14px]">public</span> Globaler Versand</span>
                </div>
            </div>

        </div>
    </footer>

    </div>

    <div id="cart-sidebar-overlay"
        class="fixed inset-0 z-[60] bg-slate-900/50 backdrop-blur-sm opacity-0 invisible transition-all duration-300"
        onclick="toggleCart()"></div>
    <div id="cart-sidebar"
        class="fixed top-0 right-0 z-[70] h-full w-full sm:w-96 bg-white shadow-2xl transform translate-x-full transition-transform duration-300 ease-out flex flex-col">
        <!-- Header -->
        <div class="p-6 border-b border-slate-100 flex items-center justify-between bg-white">
            <h3 class="text-xl font-black text-slate-900 font-serif">Ihr Warenkorb</h3>
            <button onclick="toggleCart()" class="p-2 hover:bg-slate-100 rounded-full transition-colors text-slate-500">
                <span class="material-symbols-outlined">close</span>
            </button>
        </div>

        <!-- Items Area -->
        <div id="cart-items-container" class="flex-1 overflow-y-auto p-6 space-y-6">
            <!-- Injected via JS -->
        </div>

        <!-- Footer -->
        <div class="p-6 border-t border-slate-100 bg-slate-50">
            <div class="flex justify-between items-center mb-4">
                <span class="text-sm font-bold text-slate-500 uppercase">Zwischensumme</span>
                <span id="cart-total-price" class="text-xl font-black text-slate-900">$0.00</span>
            </div>
            <button onclick="window.location.href='/checkout'"
                class="w-full bg-slate-900 text-white font-bold py-4 rounded-xl hover:bg-primary transition-all shadow-lg hover:shadow-primary/25">
                Sicher zur Kasse
            </button>
        </div>
    </div>

    <!-- === APP SCRIPT === -->
    <script>
        // --- 1. CONFIGURATION & STATE ---
        const CACHE_KEY = 'luxe_products_cache';
        const CACHE_DURATION = 24 * 60 * 60 * 1000; // 24 Hours
        const LIMIT = 20;

        let currentPage = 1;
        let currentQuery = '';
        let currentSort = '';
        let isLoading = false;
        let hasMore = true;

        // --- 2. INIT & AGE CHECK ---
        async function initApp() {
            // Age Gate Logic
            const verified = localStorage.getItem('ageVerified');
            if (verified !== 'true') {
                document.getElementById('age-gate').classList.remove('hidden');
                document.getElementById('app-content').classList.add('blurred');
                document.body.classList.add('age-locked');
            } else {
                document.getElementById('app-content').classList.remove('blurred');
                document.body.classList.remove('age-locked');
            }

            // Load Data
            await fetchProducts('', '', true);
        }

        // --- 3. DATA FETCHING (WITH CACHING) ---
        // --- 3. DATA FETCHING (Fixed) ---
        async function fetchProducts(query = '', sort = '', isNewSearch = false) {
            if (isLoading) return;
            isLoading = true;

            const grid = document.getElementById('product-grid');

            // Only reset if it's a fresh search/filter, NOT pagination
            if (isNewSearch) {
                currentPage = 1;
                currentQuery = query;
                currentSort = sort;
                hasMore = true;
                grid.innerHTML = '';
                updateLoadMoreButton(); // Show loading state on button or hide it

                // Show Skeleton (Shimmer)
                grid.innerHTML = Array(6).fill(0).map(() => `
                    <div class="bg-white rounded-2xl border border-slate-100 p-4 space-y-4 animate-pulse-card">
                        <div class="aspect-[3/4] rounded-xl skeleton-shimmer"></div>
                        <div class="h-6 rounded w-3/4 skeleton-shimmer"></div>
                        <div class="h-4 rounded w-1/2 skeleton-shimmer"></div>
                        <div class="h-10 rounded w-full mt-4 skeleton-shimmer"></div>
                    </div>
                `).join('');
            } else {
                // If loading more, update button text
                updateLoadMoreButton();
            }

            try {
                let data = null;

                // TRY CACHE (Only for initial default load)
                if (isNewSearch && !query && !sort && currentPage === 1) {
                    const cachedRaw = localStorage.getItem(CACHE_KEY);
                    if (cachedRaw) {
                        const cached = JSON.parse(cachedRaw);
                        if (Date.now() < cached.expiry) {
                            console.log("⚡ Loaded from Cache");
                            data = cached.data;
                        } else {
                            localStorage.removeItem(CACHE_KEY);
                        }
                    }
                }

                // FETCH API
                if (!data) {
                    let url = `/api/products?page=${currentPage}&limit=${LIMIT}`;
                    if (currentQuery) url += `&q=${encodeURIComponent(currentQuery)}`;
                    if (currentSort) url += `&sort=${encodeURIComponent(currentSort)}`;

                    const response = await fetch(url);
                    data = await response.json();

                    // SAVE CACHE
                    if (isNewSearch && !query && !sort && currentPage === 1) {
                        localStorage.setItem(CACHE_KEY, JSON.stringify({
                            data: data,
                            expiry: Date.now() + CACHE_DURATION
                        }));
                    }
                }

                // CLEAR SKELETONS
                if (isNewSearch) {
                    const skeletons = document.querySelectorAll('.animate-pulse-card');
                    skeletons.forEach(el => el.remove());
                }

                // RENDER
                if (data.products && data.products.length > 0) {
                    renderGrid(data.products);
                    currentPage++; // Increment page for next fetch
                } else if (isNewSearch) {
                    grid.innerHTML = `
                        <div class="col-span-full py-20 text-center flex flex-col items-center justify-center animate-fade-in">
                            <div class="bg-slate-50 p-6 rounded-full mb-4 text-slate-300">
                                <span class="material-symbols-outlined text-4xl">search_off</span>
                            </div>
                           <h3 class="text-xl font-bold text-slate-900">Keine Schätze gefunden</h3>

                        </div>
                    `;
                }

                // PAGINATION CHECK
                // IMPORTANT: Calculate if we have fetched everything
                const totalFetched = ((data.page - 1) * data.limit) + data.count;
                hasMore = totalFetched < data.total;

            } catch (error) {
                console.error("Error:", error);
                if (isNewSearch) grid.innerHTML = `<div class="col-span-full text-center py-10 text-slate-500">Verbindungsfehler.</div>`;
            } finally {
                isLoading = false;
                updateLoadMoreButton(); // Finalize button state
            }
        }

        // --- 5. UI UTILS (Fixed) ---
        function updateLoadMoreButton() {
            let container = document.getElementById('load-more-container');

            // Create if missing
            if (!container) {
                container = document.createElement('div');
                container.id = 'load-more-container';
                container.className = 'col-span-full flex justify-center py-12';
                // Append after grid
                document.getElementById('product-grid').parentNode.appendChild(container);
            }

            // If no more items, hide
            if (!hasMore) {
                container.classList.add('hidden');
                container.innerHTML = '';
                return;
            }

            // Show button
            container.classList.remove('hidden');

            // Logic: If loading, show spinner text. If not, show click action.
            if (isLoading) {
                container.innerHTML = `
                    <button disabled class="flex items-center gap-2 bg-slate-50 border border-slate-200 text-slate-400 font-bold py-3.5 px-8 rounded-full cursor-not-allowed">
                        <span class="material-symbols-outlined animate-spin text-lg">progress_activity</span>
                       <span>Wird geladen…</span>
                    </button>
                `;
            } else {
                // IMPORTANT: Passing 'false' to fetchProducts indicates "Load More" (not new search)
                container.innerHTML = `
                    <button onclick="fetchProducts(currentQuery, currentSort, false)" 
                        class="group flex items-center gap-2 bg-white border border-slate-200 text-slate-700 font-bold py-3.5 px-8 rounded-full hover:bg-slate-50 hover:border-slate-300 transition-all shadow-sm hover:shadow-md active:scale-95">
                       <span>Weitere Schätze laden</span>
                        <span class="material-symbols-outlined text-xl transition-transform group-hover:translate-y-1">expand_more</span>
                    </button>
                `;
            }
        }

        // --- 4. RENDER GRID ---
        function renderGrid(products) {
            const grid = document.getElementById('product-grid');

            const formatPrice = (price) => {
                return new Intl.NumberFormat('en-US', {
                    style: 'currency',
                    currency: 'USD',
                    maximumFractionDigits: 0
                }).format(price || 0);
            };

            const cardsHTML = products.map(product => {
                // Image Handling
                let imgUrl = 'https://placehold.co/600x800/f8fafc/e2e8f0?text=No+Image';
                if (Array.isArray(product.gallery) && product.gallery.length > 0) {
                    imgUrl = product.gallery[0];
                } else if (typeof product.gallery === 'string' && product.gallery) {
                    imgUrl = product.gallery;
                }

                const name = product.name || "Unknown Artifact";
                const optionsCount = product.options_count || 0;
                const priceDisplay = formatPrice(product.price);

                return `
               <div class="group flex flex-col bg-white rounded-2xl border border-transparent hover:border-slate-100 transition-all hover:shadow-xl overflow-hidden cursor-pointer animate-fade-in" onclick="goToProduct('${product.id}')">
    <div class="relative aspect-[3/4] overflow-hidden bg-slate-50">
        <img src="${imgUrl}" alt="${name}" loading="lazy"
             class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-105">
        
        <div class="absolute bottom-4 right-4 bg-white/90 p-3 rounded-full shadow-lg opacity-0 translate-y-4 group-hover:opacity-100 group-hover:translate-y-0 transition-all duration-300 z-10">
            <span class="material-symbols-outlined text-slate-900 text-xl">arrow_forward</span>
        </div>
        
        ${optionsCount > 0 ? `
        <div class="absolute top-3 left-3 bg-slate-900/90 backdrop-blur text-white text-[10px] font-bold px-3 py-1.5 rounded-full uppercase tracking-wide shadow-sm z-10 flex items-center gap-1">
            <span class="material-symbols-outlined text-[12px]">tune</span>
            ${optionsCount} Optionen
        </div>` : ''}
        
        <div class="absolute inset-0 bg-gradient-to-t from-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none"></div>
    </div>
    
    <div class="p-5 flex flex-col gap-3 flex-grow">
        <div>
            <h3 class="text-lg font-bold text-slate-900 leading-tight group-hover:text-primary transition-colors line-clamp-2">
                ${name}
            </h3>
        </div>
        
        <div class="mt-auto pt-4 border-t border-slate-50 flex justify-between items-center">
            <div class="flex flex-col">
                <span class="text-xs text-slate-400 font-medium uppercase tracking-wider">
                    Ab
                </span>
                <span class="text-xl font-black text-slate-900 tracking-tight">
                    ${priceDisplay}
                </span>
            </div>
            <span class="text-xs font-bold text-primary bg-primary/5 px-3 py-1.5 rounded-lg group-hover:bg-primary group-hover:text-white transition-colors">
                Anpassen
            </span>
        </div>
    </div>
</div>

                `;
            }).join('');

            grid.insertAdjacentHTML('beforeend', cardsHTML);
        }

        // --- 5. UI UTILS ---
        function updateLoadMoreButton() {
            let container = document.getElementById('load-more-container');
            if (!container) {
                container = document.createElement('div');
                container.id = 'load-more-container';
                container.className = 'col-span-full flex justify-center py-12';
                document.getElementById('product-grid').parentNode.appendChild(container);
            }

            container.innerHTML = `
   <button onclick="fetchProducts(currentQuery, currentSort, false)" 
        class="group flex items-center gap-2 bg-white border border-slate-200 text-slate-700 font-bold py-3.5 px-8 rounded-full hover:bg-slate-50 hover:border-slate-300 transition-all shadow-sm hover:shadow-md active:scale-95">
    <span>${isLoading ? 'Wird geladen…' : 'Weitere Schätze entdecken'}</span>
    ${isLoading ? '' : '<span class="material-symbols-outlined text-xl transition-transform group-hover:translate-y-1">expand_more</span>'}
</button>

            `;

            if (hasMore) container.classList.remove('hidden');
            else container.classList.add('hidden');
        }

        function verifyAge(isAdult) {
            if (isAdult) {
                localStorage.setItem('ageVerified', 'true');
                const gate = document.getElementById('age-gate');
                gate.style.opacity = '0';
                document.getElementById('app-content').classList.remove('blurred');
                document.body.classList.remove('age-locked');
                setTimeout(() => gate.classList.add('hidden'), 500);
            }
        }
        function rejectAge() {
            document.getElementById('age-step-1').classList.add('hidden');
            document.getElementById('age-step-2').classList.remove('hidden');
        }
        function resetAgeGate() {
            document.getElementById('age-step-2').classList.add('hidden');
            document.getElementById('age-step-1').classList.remove('hidden');
        }
        function goToProduct(id) { window.location.href = `/product/${id}`; }
        function scrollToGrid() { document.getElementById('shop-anchor').scrollIntoView({ behavior: 'smooth' }); }
        function clearSearch() {
            document.getElementById('search-input').value = '';
            fetchProducts('', '', true);
        }

        // Event Listeners
        let searchTimeout = null;
        document.getElementById('search-input').addEventListener('input', (e) => {
            clearTimeout(searchTimeout);
            searchTimeout = setTimeout(() => {
                const sort = document.getElementById('sort-select').value;
                fetchProducts(e.target.value, sort, true);
            }, 400);
        });

        document.getElementById('sort-select').addEventListener('change', (e) => {
            const query = document.getElementById('search-input').value;
            fetchProducts(query, e.target.value, true);
        });

        window.addEventListener('DOMContentLoaded', initApp);
        function toggleMobileMenu() {
            const menu = document.getElementById('mobile-menu');
            const overlay = document.getElementById('mobile-menu-overlay');

            if (menu.classList.contains('-translate-x-full')) {
                menu.classList.remove('-translate-x-full');
                overlay.classList.remove('opacity-0', 'invisible');
                // Prevent body scroll
                document.body.style.overflow = 'hidden';
            } else {
                menu.classList.add('-translate-x-full');
                overlay.classList.add('opacity-0', 'invisible');
                // Restore body scroll
                document.body.style.overflow = '';
            }
        }
        // --- CART LOGIC ---
        function toggleCart() {
            const sidebar = document.getElementById('cart-sidebar');
            const overlay = document.getElementById('cart-sidebar-overlay');

            if (sidebar.classList.contains('translate-x-full')) {
                sidebar.classList.remove('translate-x-full');
                overlay.classList.remove('opacity-0', 'invisible');
                renderCartSidebar(); // Re-render content when opening
            } else {
                sidebar.classList.add('translate-x-full');
                overlay.classList.add('opacity-0', 'invisible');
            }
        }
    </script>

    <!-- === FIREBASE AUTH === -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

        const firebaseConfig = {
  apiKey: "AIzaSyAf1cpih22DLVpo9umzhLeJWi59pcQwhUQ",
  authDomain: "realistixdoll.firebaseapp.com",
  projectId: "realistixdoll",
  storageBucket: "realistixdoll.firebasestorage.app",
  messagingSenderId: "797964056076",
  appId: "1:797964056076:web:6deb911bda83372109e029",
  measurementId: "G-1GBMKJEV3L"
};


        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const authContainer = document.getElementById('header-auth-actions');

        onAuthStateChanged(auth, (user) => {
            const mobileAuthContainer = document.getElementById('mobile-auth-container'); // NEW

            if (user) {
                const displayName = user.displayName || user.email.split('@')[0];
                const photoURL = user.photoURL
                    ? user.photoURL
                    : `https://ui-avatars.com/api/?name=${displayName}&background=20cfdf&color=fff&size=128`;

                authContainer.innerHTML = `
            <a href="/my-orders" class="hidden md:flex items-center gap-2 px-4 py-2 bg-slate-900 text-white rounded-lg text-xs font-bold uppercase tracking-wider hover:bg-slate-800 transition-all shadow-md hover:shadow-lg">
                <span class="material-symbols-outlined text-sm">inventory_2</span> Gebucht
            </a>
            <div class="relative group">
                <button class="flex items-center gap-2 pl-2 pr-1 py-1 rounded-full border border-slate-200 hover:border-primary/50 transition-all bg-white">
                    <span class="text-sm font-bold text-slate-700 max-w-[100px] truncate hidden sm:block pl-2">${displayName}</span>
                    <img src="${photoURL}" alt="Profil" class="size-8 rounded-full object-cover border border-slate-200">
                </button>
                <div class="absolute right-0 top-full mt-2 w-48 bg-white rounded-xl shadow-xl border border-slate-100 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 transform translate-y-2 group-hover:translate-y-0 z-50">
                    <div class="p-3 border-b border-slate-50">
                        <p class="text-xs text-slate-400 font-bold uppercase">Konto</p>
                        <p class="text-sm font-bold text-slate-800 truncate">${user.email}</p>
                    </div>
                    <ul class="py-1">
                        <li><a href="/my-orders" class="block px-4 py-2 text-sm text-slate-600 hover:bg-slate-50 hover:text-primary transition-colors">Meine Sammlung</a></li>
                        <li><button id="btn-logout" class="w-full text-left px-4 py-2 text-sm text-red-500 hover:bg-red-50 transition-colors">Abmelden</button></li>
                    </ul>
                </div>
            </div>
        `;

                mobileAuthContainer.innerHTML = `
            <div class="flex items-center gap-4 mb-4">
                <img src="${photoURL}" class="size-12 rounded-full border-2 border-white shadow-sm">
                <div class="min-w-0">
                    <p class="font-bold text-slate-900 truncate">${displayName}</p>
                    <p class="text-xs text-slate-500 truncate">${user.email}</p>
                </div>
            </div>
            <div class="grid grid-cols-2 gap-2">
                <a href="/my-orders" class="flex items-center justify-center gap-2 py-2.5 bg-primary text-white text-sm font-bold rounded-xl shadow-md shadow-primary/20">
                    <span class="material-symbols-outlined text-lg">inventory_2</span> Meine Bestellungen
                </a>
                <button id="btn-logout-mobile" class="flex items-center justify-center gap-2 py-2.5 bg-red-50 text-red-500 text-sm font-bold rounded-xl border border-red-100">
                    <span class="material-symbols-outlined text-lg">logout</span> Abmelden
                </button>
            </div>
        `;

                setTimeout(() => {
                    document.getElementById('btn-logout-mobile').addEventListener('click', () => {
                        signOut(auth).then(() => fetch('/logout').then(() => window.location.reload()));
                    });
                }, 0);

                setTimeout(() => {
                    document.getElementById('btn-logout').addEventListener('click', () => {
                        signOut(auth).then(() => fetch('/logout').then(() => window.location.reload()));
                    });
                }, 0);

            } else {
                authContainer.innerHTML = `
            <a href="/auth?type=signin" class="text-sm font-bold text-slate-600 hover:text-primary transition-colors px-2">Anmelden</a>
            <a href="/auth?type=signup" class="px-5 py-2.5 text-sm font-bold text-white bg-slate-900 rounded-lg hover:bg-primary hover:shadow-lg hover:shadow-primary/20 transition-all duration-300">Registrieren</a>
        `;

                mobileAuthContainer.innerHTML = `
            <div class="text-center">
                <div class="size-12 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-3 text-slate-400">
                    <span class="material-symbols-outlined text-2xl">person</span>
                </div>
                <h3 class="font-bold text-slate-900 mb-1">Willkommen, Gast</h3>
                <p class="text-xs text-slate-500 mb-4">Melden Sie sich an, um Bestellungen zu verfolgen und Preise einzusehen.</p>
                <div class="grid grid-cols-2 gap-3">
                    <a href="/auth?type=signin" class="py-2.5 border border-slate-200 text-slate-700 font-bold rounded-xl text-center hover:bg-slate-50">Anmelden</a>
                    <a href="/auth?type=signup" class="py-2.5 bg-slate-900 text-white font-bold rounded-xl text-center hover:bg-slate-800">Registrieren</a>
                </div>
            </div>
        `;
            }

            authContainer.classList.remove('opacity-0');
        });



        // --- MOBILE MENU LOGIC ---



    </script>

    <script>
        
        function renderCartSidebar() {
            const cart = JSON.parse(localStorage.getItem('luxeCart')) || [];
            const container = document.getElementById('cart-items-container');
            const totalEl = document.getElementById('cart-total-price');
            const badge = document.getElementById('cart-badge');

            // Update Badge
            if (cart.length > 0) badge.classList.remove('hidden');
            else badge.classList.add('hidden');

            let total = 0;

            if (cart.length === 0) {
                container.innerHTML = `
        <div class="flex flex-col items-center justify-center h-full text-center text-slate-400">
            <span class="material-symbols-outlined text-4xl mb-2">shopping_bag</span>
            <p>Ihr Warenkorb ist leer</p>
            <button onclick="toggleCart()" class="mt-4 text-primary font-bold text-sm hover:underline">
                Jetzt einkaufen
            </button>
        </div>
        `;
                totalEl.innerText = "$0,00";
                return;
            }

            container.innerHTML = cart.map((item, idx) => {
                total += item.price * item.qty;
                return `
        <div class="flex gap-4 group">
            <div class="size-20 bg-slate-100 rounded-lg bg-cover bg-center shrink-0 border border-slate-200"
                 style="background-image: url('${item.image}')"></div>

            <div class="flex-1 min-w-0 flex flex-col justify-between py-1">
                <div>
                    <h4 class="font-bold text-slate-900 text-sm truncate leading-tight">
                        ${item.name}
                    </h4>
                    <p class="text-xs text-slate-500 mt-1">
                        ${Object.keys(item.config || {}).length} Anpassungen
                    </p>
                </div>

                <div class="flex justify-between items-center">
                    <span class="font-bold text-slate-900">
                        $${item.price.toLocaleString('de-DE')}
                    </span>
                    <button onclick="removeFromCart(${idx})"
                        class="text-xs text-red-400 hover:text-red-600 font-bold uppercase">
                        Entfernen
                    </button>
                </div>
            </div>
        </div>
        `;
            }).join('');

            totalEl.innerText = "$" + total.toLocaleString('de-DE');
        }

        function removeFromCart(idx) {
            let cart = JSON.parse(localStorage.getItem('luxeCart')) || [];
            cart.splice(idx, 1);
            localStorage.setItem('luxeCart', JSON.stringify(cart));
            renderCartSidebar();
        }

        document.addEventListener('DOMContentLoaded', () => {
            // 1. Check for Cart Data
            const cart = JSON.parse(localStorage.getItem('luxeCart')) || [];

            // 2. Update Badge Visibility immediately
            if (cart.length > 0) {
                document.getElementById('cart-badge').classList.remove('hidden');
            }

            // 3. OPTIONAL: Pre-render the cart HTML so it is ready before opening
            renderCartSidebar();
        });


        // Initialize Badge on Load
        document.addEventListener('DOMContentLoaded', () => {
            const cart = JSON.parse(localStorage.getItem('luxeCart')) || [];
            if (cart.length > 0) document.getElementById('cart-badge').classList.remove('hidden');
        });
    </script>
</body>

</html>